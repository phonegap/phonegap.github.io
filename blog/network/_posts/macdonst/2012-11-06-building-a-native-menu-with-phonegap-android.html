---
type: post
title: Building a Native Menu with PhoneGap Android
format: html
external: true
link: http://simonmacdonald.blogspot.com/2012/11/building-native-menu-with-phonegap.html
status: publish
date: 2012-11-06 14:57:00 Z
author: Simon MacDonald
permalink: /admin/blog/2012-11-06-building-a-native-menu-with-phonegap-android
---
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-cs_a2ro_P0Y/TkA8D-vPCVI/AAAAAAAABwE/gHJwh4m8Jkw/s1600/pg.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-cs_a2ro_P0Y/TkA8D-vPCVI/AAAAAAAABwE/gHJwh4m8Jkw/s200/pg.png" style="max-width:159px;" /></a></div>So this question has been posed to me quite a few times over the past couple of weeks so I figure this is probably a good idea for a series of blog posts. In this&nbsp;instalment&nbsp;I'll talk about creating a native menu and next time we'll use only HTML.<br /><br />So when I talk about a native menu I mean an Android options menu and a lot of the information I'm going to give you is covered very well on this <a href="https://developer.android.com/guide/topics/ui/menus.html">Android Developer page</a>&nbsp;but what I'm going to do is help show you where to add the hooks into your PhoneGap&nbsp;application. Here is an example of an options menu from the Contacts app:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-VsigFNc1j5Y/UJcniVrOJyI/AAAAAAAACIM/mz5UQRFxIEU/s1600/Screen+Shot+2012-11-04+at+9.41.42+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-VsigFNc1j5Y/UJcniVrOJyI/AAAAAAAACIM/mz5UQRFxIEU/s400/Screen+Shot+2012-11-04+at+9.41.42+PM.png" style="max-width:240px;" /></a></div><br />The first step in creating the menu is to define it in XML. My&nbsp;recommendation is to create a menu folder under the res folder in your Android Eclipse project. Then you create a new File with an XML extension. For this post I'll call mine example.xml. When your're done your res folder should look something like this:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-He1RJMLzUTk/UJcq5LYftrI/AAAAAAAACIc/__XM5XWHKqE/s1600/Screen+Shot+2012-11-04+at+9.56.18+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-He1RJMLzUTk/UJcq5LYftrI/AAAAAAAACIc/__XM5XWHKqE/s400/Screen+Shot+2012-11-04+at+9.56.18+PM.png" style="max-width:400px;" /></a></div><br />Don't worry about the red X's as we haven't edited the XML file yet so it is going to complain about a premature end of file. For a real good description of what goes into a menu XML file <a href="https://developer.android.com/guide/topics/ui/menus.html#xml">read this</a>. For our purposes I'm just going to give you&nbsp;the XML to paste into&nbsp;the file:<br /><br /><script src="https://gist.github.com/4015145.js?file=example.xml"></script> But when you view the file in Eclipse you'll still see errors:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-DuOzoQMCazg/UJcxcxhObJI/AAAAAAAACIs/F_kxPP-rlzM/s1600/Screen+Shot+2012-11-04+at+10.24.23+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-DuOzoQMCazg/UJcxcxhObJI/AAAAAAAACIs/F_kxPP-rlzM/s1600/Screen+Shot+2012-11-04+at+10.24.23+PM.png" /></a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">and that is to be expected as we haven't added the two images to the drawables folder nor have we added our two new strings to strings.xml. To fix these issues first download these two images:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-w_TyB5Dy9yg/UJc0xMpda7I/AAAAAAAACJE/_xwcVadUC4s/s1600/settings.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-w_TyB5Dy9yg/UJc0xMpda7I/AAAAAAAACJE/_xwcVadUC4s/s1600/settings.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-IBlUdVoXhsI/UJc0gaKQAOI/AAAAAAAACI8/KauiIyIMmgo/s1600/help.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-IBlUdVoXhsI/UJc0gaKQAOI/AAAAAAAACI8/KauiIyIMmgo/s1600/help.png" /></a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">and copy them to your projects res/drawable-hdpi folder. When you want to put out a professional application you'll need to <a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design_menu.html">provide icons of various sizes</a> but the above is enough for our needs.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">To fix the rest of the red X's you'll need to open&nbsp;the res/values/strings.xml and add two new Strings. The first should have the name "settings" and a value of "Settings. The second should have the name"help" and, predictably, the value of "Help". At this point all the red X's from example.xml and from the res folder&nbsp;hierarchy&nbsp;should have disappeared.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-HQTy-XxENdA/UJc4Lv2pQ_I/AAAAAAAACJU/nXlVb7MiRHo/s1600/Screen+Shot+2012-11-04+at+10.52.55+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-HQTy-XxENdA/UJc4Lv2pQ_I/AAAAAAAACJU/nXlVb7MiRHo/s1600/Screen+Shot+2012-11-04+at+10.52.55+PM.png" /></a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">If they haven't, well then you've done something wrong and should probably go back over all&nbsp;the steps to make sure you haven't missed anything.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Okay, so now we've got all the resources in place. Let's go write some actual Java code. Don't worry much of it will be cut and paste. In Eclipse open up your main Java class, you know the one that extends DroidGap.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">First we'll need to tell your application what to do when it detects that the menu button has been pressed. You'll need to paste the following code into you main Java class:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><script src="https://gist.github.com/4015145.js?file=create_menu.java"></script> You shouldn't need to change anything unless you've called your menu XML file something different than example.xml. If you have you'll need to change R.menu.example into R.menu.<file name="name"> where you replace <file name="name"> with the name of your file minus the .xml extension.</file></file><br /><br />The second bit of code you need to add is a method that will tell your&nbsp;application&nbsp;what to do when the individual menu items are clicked. Here's some example code:<br /><br /><script src="https://gist.github.com/4015145.js?file=option_selected.java"></script><br />When you click on the Setting button we'll use an Android intent to load the devices Settings panel. If you click on the Help button then we'll execute some JavaScript code. That's it!&nbsp;You don't need to add anything to your HTML/JS code to get a native Android options menu working with your PhoneGap application. Here is what it would look like:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-WKgq-MehF1U/UJklEyMNsjI/AAAAAAAACJk/pL7ggWzNh9s/s1600/Screen+Shot+2012-11-06+at+9.55.34+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-WKgq-MehF1U/UJklEyMNsjI/AAAAAAAACJk/pL7ggWzNh9s/s400/Screen+Shot+2012-11-06+at+9.55.34+AM.png" style="max-width:238px;" /></a></div><br /><br />Please note, I'm just providing a quick example and you are not limited to how you handle the menu button clicks in the least. You may want to handle it in Java and do something that you can't do in JavaScript or you may want to call a JavaScript function on your page to have your UI react in some interesting way.<br /><br />In my next post I'll show you the reverse. How to handle everything in HTML and JavaScript!<div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/72386855013225666-2800143535026269341?l=simonmacdonald.blogspot.com' alt='' /></div>
